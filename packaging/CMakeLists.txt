# Value populated by CMAKE_PROJECT_NAME
# set(CPACK_PACKAGE_NAME MyProj)

# Value populated by CMAKE_PROJECT_DESCRIPTION
# set(CPACK_PACKAGE_DESCRIPTION_SUMMARY "Example project")

# Base package settings
set(CPACK_PACKAGE_VENDOR "My Company")
set(CPACK_PACKAGE_DIRECTORY build/distribution)
set(CPACK_PACKAGE_INSTALL_DIRECTORY ${CPACK_PACKAGE_NAME})
set(CPACK_SOURCE_PACKAGE_FILE_NAME "${CMAKE_PROJECT_NAME}-${CMAKE_PROJECT_VERSION}")
set(CPACK_PACKAGE_VERSION_MAJOR ${CMAKE_PROJECT_VERSION_MAJOR})
set(CPACK_PACKAGE_VERSION_MINOR ${CMAKE_PROJECT_VERSION_MINOR})
set(CPACK_PACKAGE_VERSION_PATCH ${CMAKE_PROJECT_VERSION_PATCH})
set(CPACK_VERBATIM_VARIABLES YES)

# Package resources
set(CPACK_PACKAGE_DESCRIPTION_FILE ${CMAKE_CURRENT_LIST_DIR}/Description.txt)
set(CPACK_RESOURCE_FILE_WELCOME ${CMAKE_CURRENT_LIST_DIR}/Welcome.txt)
set(CPACK_RESOURCE_FILE_LICENSE ${CMAKE_CURRENT_LIST_DIR}/License.txt)
set(CPACK_RESOURCE_FILE_README ${CMAKE_CURRENT_LIST_DIR}/Readme.txt)

# This option will change the mount drive icon used.
# set(CPACK_PACKAGE_ICON ${CMAKE_CURRENT_LIST_DIR}/dmg/volume.icns)

# macOS settings for DragNDrop generator
set(CPACK_DMG_SLA_USE_RESOURCE_FILE_LICENSE OFF)
set(CPACK_DMG_BACKGROUND_IMAGE "${CMAKE_CURRENT_SOURCE_DIR}/dmg/AppDMGBackground.tiff")
set(CPACK_DMG_DS_STORE_SETUP_SCRIPT "${CMAKE_CURRENT_LIST_DIR}/dmg/AppDMGSetup.scpt")
set(CPACK_DMG_VOLUME_NAME "${CMAKE_PROJECT_NAME}")

if (NOT WIN32)
  set(CMAKE_INSTALL_PREFIX "/opt/mycompany.com/${PROJECT_NAME}")
endif ()

# Generator selection per platform
if (WIN32)
  set(CPACK_GENERATOR ZIP WIX)
elseif (APPLE)
  set(CPACK_GENERATOR TGZ DragNDrop)
elseif (CMAKE_SYSTEM_NAME STREQUAL "Linux")
  set(CPACK_GENERATOR TGZ RPM)
else ()
  set(CPACK_GENERATOR TGZ)
endif ()

include(CPack)
